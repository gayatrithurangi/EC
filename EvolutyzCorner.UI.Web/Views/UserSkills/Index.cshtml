@model evolCorner.Models.UserProjectdetailsEntity

@{
    ViewBag.Title = "Index";
}
@*<link href="~/Content/Site.css" rel="stylesheet" />*@
<script src="~/Scripts/jquery-1.10.2.js"></script>
@*<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.css">
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.js"></script>*@
<link href="~/plugins/datatables/dataTables.bootstrap.css" rel="stylesheet" />
<script src="~/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="~/plugins/datatables/dataTables.bootstrap.min.js"></script>

<style>
    .box.box-solid.box-brown {
        border: 1px solid #aaaaaa;
    }
    a.btn-icn {
        display: none
    }

    a.btn-icn-hide {
        display: inline-block
    }
        .box.box-solid.box-brown > .box-header {
            /*background-color: #a3765b;
        color: #fff;*/
            border-color: #aaaaaa;
            background: #cccccc url(../Content/themes/base/images/ui-bg_highlight-soft_75_cccccc_1x100.png) 50% 50% repeat-x;
            color: #222222;
        }

        .box.box-solid.box-brown .btn-warning {
            background-color: #f97045;
            border-color: #fe450b;
        }

        .box.box-solid.box-brown .btn-success {
            background-color: #fea728;
            border-color: #FF9800;
        }

    #divhiduserid ~ label {
        margin: 7px auto;
    }
</style>

<!-- Horizontal Form -->
<div class="block-content">
    @*<div class="box-header with-border">
        <h3 class="box-title">AddUser skills</h3>
    </div>*@

    <div class="">
        <h4 class="heading-fancy"> Leave Type Master </h4>
        @*<input type="button" id="btnAddModel" value="+" data-toggle="modal" data-target="#ContainerGridDetail" class="btn" />*@
        <button class="btn" id="submit" value="1"><i class="fa fa-plus" style="font-size: 20px;line-height: inherit;top: -2px;position: relative;"></i></button>
    </div>

    <div class="box-body no-padding" id="body">
        <div class="row">
            <div class="col-md-10">


                @*<label for="inputPassword3" class="col-md-2 control-label">Skills : </label>*@
                <div class="col-md-3">
                    <select class="form-control" style="width:100%;" name="skills" id="Skills" value="">
                        @*//<option value="">Select Skills</option>*@
                    </select>
                </div>
                @*<label for="inputPassword3" class="col-md-2 control-label">YearsEXp:</label>*@


                <div class="col-md-3">
                    <select class="form-control" style="width:100%;" name="year" id="yearsOfExperience">
                        <option value="-1">Select Years of Exp</option>
                    </select>
                </div>
                @*<label for="inputPassword3" class="col-md-2 control-label">MonthsExp:</label>*@


                <div class="col-md-3">
                    <select class="form-control" style="width:100%;" name="year" id="MonthsOfExperience">
                        <option value="-1">Select Months of Exp</option>
                    </select>
                    </div>
                </div>
            </div>

    </div>

    <div class="container">
        <h2> Skill Details</h2>
        <div class="table-responsive">
            <div class="clearfix table-block">
                <table id="table">
                    <thead>
                        <tr>
                            <th>User Id</th>
                            <th>Skills</th>
                            <th>Experience</th>
                            <th id="actions">Actions</th>
                            @*<th>Edit</th>
                            <th>Delete</th>*@
                        </tr>
                    </thead>
                </table>
                </div>
</div>
            </div>



        </div>
        <!-- /.box -->
        <!-- /.content-wrapper -->
        <!-- Control Sidebar -->
        <aside class="control-sidebar control-sidebar-dark">
            <!-- Create the tabs -->
            <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
                <li><a href="#control-sidebar-home-tab" data-toggle="tab"><i class="fa fa-home"></i></a></li>
                <li><a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-gears"></i></a></li>
            </ul>
            <!-- Tab panes -->
            <div class="tab-content">
                <!-- Home tab content -->
                <div class="tab-pane" id="control-sidebar-home-tab">
                    <h3 class="control-sidebar-heading">Recent Activity</h3>
                    <ul class="control-sidebar-menu">
                        <li>
                            <a href="javascript:void(0)">
                                <i class="menu-icon fa fa-birthday-cake bg-red"></i>
                                <div class="menu-info">
                                    <h4 class="control-sidebar-subheading">Langdon's Birthday</h4>
                                    <p>Will be 23 on April 24th</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)">
                                <i class="menu-icon fa fa-user bg-yellow"></i>
                                <div class="menu-info">
                                    <h4 class="control-sidebar-subheading">Frodo Updated His Profile</h4>
                                    <p>New phone +1(800)555-1234</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)">
                                <i class="menu-icon fa fa-envelope-o bg-light-blue"></i>
                                <div class="menu-info">
                                    <h4 class="control-sidebar-subheading">Nora Joined Mailing List</h4>
                                    <p>nora@example.com</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)">
                                <i class="menu-icon fa fa-file-code-o bg-green"></i>
                                <div class="menu-info">
                                    <h4 class="control-sidebar-subheading">Cron Job 254 Executed</h4>
                                    <p>Execution time 5 seconds</p>
                                </div>
                            </a>
                        </li>
                    </ul>
                    <!-- /.control-sidebar-menu -->

                    <h3 class="control-sidebar-heading">Tasks Progress</h3>
                    <ul class="control-sidebar-menu">
                        <li>
                            <a href="javascript:void(0)">
                                <h4 class="control-sidebar-subheading"> Custom Template Design <span class="label label-danger pull-right">70%</span> </h4>
                                <div class="progress progress-xxs">
                                    <div class="progress-bar progress-bar-danger" style="width: 70%"></div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)">
                                <h4 class="control-sidebar-subheading"> Update Resume <span class="label label-success pull-right">95%</span> </h4>
                                <div class="progress progress-xxs">
                                    <div class="progress-bar progress-bar-success" style="width: 95%"></div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)">
                                <h4 class="control-sidebar-subheading"> Laravel Integration <span class="label label-warning pull-right">50%</span> </h4>
                                <div class="progress progress-xxs">
                                    <div class="progress-bar progress-bar-warning" style="width: 50%"></div>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)">
                                <h4 class="control-sidebar-subheading"> Back End Framework <span class="label label-primary pull-right">68%</span> </h4>
                                <div class="progress progress-xxs">
                                    <div class="progress-bar progress-bar-primary" style="width: 68%"></div>
                                </div>
                            </a>
                        </li>
                    </ul>
                    <!-- /.control-sidebar-menu -->

                </div>
                <!-- /.tab-pane -->
                <!-- Stats tab content -->
                <div class="tab-pane" id="control-sidebar-stats-tab">Stats Tab Content</div>
                <!-- /.tab-pane -->
                <!-- Settings tab content -->
                <div class="tab-pane" id="control-sidebar-settings-tab">
                    <form method="post">
                        <h3 class="control-sidebar-heading">General Settings</h3>
                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Report panel usage
                                <input type="checkbox" class="pull-right" checked>
                            </label>
                            <p> Some information about this general settings option </p>
                        </div>
                        <!-- /.form-group -->

                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Allow mail redirect
                                <input type="checkbox" class="pull-right" checked>
                            </label>
                            <p> Other sets of options are available </p>
                        </div>
                        <!-- /.form-group -->

                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Expose author name in posts
                                <input type="checkbox" class="pull-right" checked>
                            </label>
                            <p> Allow the user to show his name in blog posts </p>
                        </div>
                        <!-- /.form-group -->

                        <h3 class="control-sidebar-heading">Chat Settings</h3>
                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Show me as online
                                <input type="checkbox" class="pull-right" checked>
                            </label>
                        </div>
                        <!-- /.form-group -->

                        <div class="form-group">
                            <label class="control-sidebar-subheading">
                                Turn off notifications
                                <input type="checkbox" class="pull-right">
                            </label>
                        </div>
                        <!-- /.form-group -->

                        <div class="form-group">
                            <label class="control-sidebar-subheading"> Delete chat history <a href="javascript:void(0)" class="text-red pull-right"><i class="fa fa-trash-o"></i></a> </label>
                        </div>
                        <!-- /.form-group -->
                    </form>
                </div>
                <!-- /.tab-pane -->
            </div>






        </aside>
        <!-- Modal -->
        <div class="modal fade" id="myModal" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        @*<button type="button" class="close" data-dismiss="modal">&times;</button>*@
                        <h4 class="modal-title">Modal Header</h4>
                    </div>
                    <div class="modal-body">
                        <label for="inputPassword3">Skills:</label>


                        <select class="form-control" name="year" id="SkillsTitle">
                            <option value="">Select Years of Exp</option>
                        </select>

                        <label for="inputPassword3">Years of Experience:</label>


                        <input type="number" class="form-control" name="year" id="YearsOfExperienceEdit">

                        <label for="inputPassword3">Months of Experience:</label>

                        <input type="number" class="form-control" name="year" id="MonthsOfExperienceEdit">


                    </div>
                    <div class="modal-footer">
                        <button type="button" id="update" class="btn btn-default">Update</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>

            </div>
        </div>
        @*<div class="modal" id="ContainerGridDetail" role="dialog">
                <div class="ui-widget-overlay" style="height: 100%; width: 100%; position: fixed; left: 0px; top: 60px; z-index: 949; opacity: -2.3;"></div>
                <div class="modal-dialog">
                    <label id="succ"></label>

                    <div class="modal-content">

                        <div class="ui-widget-header">
                            <h4 id="agrd" class="modal-title" style="margin-left:10px;">Add SubscriptionPackage Details</h4>
                        </div>
                        <div class="modal-body">
                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <label for="inputPassword3">YearsEXp:</label>


                                    <select class="form-control" name="year" id="yearsOfExperienceEdit">
                                        <option value="">Select Years of Exp</option>
                                    </select>

                                    <label for="inputPassword3">MonthsExp:</label>


                                    <select class="form-control" name="year" id="MonthsOfExperienceEdit">
                                        <option value="">Select Months of Exp</option>
                                    </select>

                                </div>

                            </div>


                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="col-sm-12">
                                        <div class="col-sm-12">
                                            <input type="button" id="btnClose" value="Close" data-dismiss="modal" class="btn btn-default pull-right" />&nbsp;&nbsp;&nbsp;
                                            <input type="button" id="btnAddAccount" value="Create" class="btn btn-success pull-right" />
                                            <input type="button" id="btnUpdate" value="Update" class="btn btn-success pull-right" />

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>*@
        <!-- /.control-sidebar -->
        <!-- Add the sidebar's background. This div must be placed
               immediately after the control sidebar -->
        <div class="control-sidebar-bg"></div>
        @*</div>*@


        <script>
            var dropdownflag = 0; var usrid = "";
            var skilltitle;
            var Experience;
            function openNav() {
                document.getElementById("mySidenav").style.width = "250px";
            }

            function closeNav() {
                document.getElementById("mySidenav").style.width = "0";
            }
            function bindSkills() {
                $.ajax({

                    type: "GET",
                    contentType: "application/json; charset=utf-8",
                    url: "/UserSkills/getUsers",
                    //data: "{}",
                    dataType: "json",
                    success: function (Result) {
                        //$("#SkillsTitle").empty();

                        $(Result).each(function () {

                            $("#SkillsTitle").append($("<option></option>").val(this.SkillId).html(this.SkillTitle));

                        });


                    },

                    //error: function (Result) {

                    //    alert("Error");

                    //}

                });



            }




            $(document).ready(function () {

                loaddata();
                 var permissions = '@ViewBag.a';
          
                if (permissions === "Read/Write") {
                    $("#btnAddModel").show();

                    $("#actions").show();
                     }
                else {
                    $("#btnAddModel").hide();

                    $("#actions").hide();
                }
                for (var i = 0; i < 30; i++) {
                    $("#yearsOfExperience").append($("<option></option>").html(i));
                }
                for (var j = 0; j < 30; j++) {
                    $("#MonthsOfExperience").append($("<option></option>").html(j));
                }

                $.ajax({

                    type: "GET",
                    contentType: "application/json; charset=utf-8",
                    url: "/UserSkills/getUsers",
                    //data: "{}",
                    dataType: "json",
                    success: function (Result) {

                        $("#Skills").append($("<option></option>").html("Select Skills"));
                        $(Result).each(function () {

                            $("#Skills").append($("<option></option>").val(this.SkillId).html(this.SkillTitle));

                        });

                    },

                    //error: function (Result) {

                    //    alert("Error");

                    //}

                });

                $("#submit").click(function () {

                    var skill = $("#Skills").val();
                    var yearExp = $("#yearsOfExperience").val();
                    var monthExp = $("#MonthsOfExperience").val();

                    if (skill === "Select Skills") {
                        alert("Please Select Skills");
                        $("#Skills").focus();
                        return false;
                    }

                    if (yearExp === "-1") {
                        alert("Please Select Year of Exp");
                        $("#yearsOfExperience").focus();
                        return false;
                    }


                    if (monthExp === "-1") {
                        alert("Please Select Month of Exp");
                        $("#MonthsOfExperience").focus();
                        return false;
                    }



                    $.ajax({

                        type: "POST",
                        // contentType: "application/json; charset=utf-8",
                        url: "/UserSkills/AddSkills",
                        data: { skill: skill, yearExp: yearExp, monthExp: monthExp },
                        dataType: "json",
                        cache: false,
                        success: function (res) {
                            alert(res);
                            window.location.reload();

                        },



                    })



                    //loaddata();

                })


            })



            $("#update").click(function () {

                var userid = usrid;
                var SkillsTitle = $('#SkillsTitle').val();
                var yearExp = $("#YearsOfExperienceEdit").val();
                var monthExp = $("#MonthsOfExperienceEdit").val();

                $.ajax({

                    type: "POST",
                    // contentType: "application/json; charset=utf-8",
                    url: "/UserSkills/updateSkills",
                    data: { userID: userid, SkillsTitle: SkillsTitle, yearExp: yearExp, monthExp: monthExp },
                    dataType: "json",
                    cache: false,
                    success: function (res) {
                        alert(res);
                        window.location.reload();

                    },

                })
            })


            function loaddata() {

                var Topiccode = "";
                $.ajax({
                    url: "/UserSkills/getAllUsersDetails",
                    type: "Get",
                    dataType: "json",
                    success: function (res) {

                        $('#table').DataTable({

                            'data': res,
                            'paginate': true,
                            'sort': true,
                            'Processing': true,
                            'columns': [
                                { 'data': 'Usr_UserId' },
                                { 'data': 'SkillTitle' },
                                { 'data': 'Experience' },

                                {
                                    "render": function (Usr_UserId, type, full, meta) {
                                        var permissions = '@ViewBag.a';
                                        if (permissions === "Read/Write") {
                                            return '<a class="btn btn-icn btn-icn-hide  edit" data-toggle="modal" data-attr="SkillTitle" data-target="#myModal" data-skillID="' + full.SkillId + '" data-id="' + full.Usr_UserId + '" data-STitle="' + full.SkillTitle + '" data-Exp="' + full.Experience + '" title="Edit" onclick="EditUser(this)" ><i class="fa fa-edit"></i></a><a class="btn btn-icn btn-icn-hide" data-target="#containerDelete" data-toggle="modal"  data-id="' + full.Usr_UserId + '" title="Delete" onclick="DeleteSkill(this)" "><i class="fa fa-trash"></i></a>';
                                        }
                                        else {

                                            return '<a class="btn btn-icn" data-toggle="modal" data-attr="SkillTitle" data-target="#myModal" data-skillID="' + full.SkillId + '" data-id="' + full.Usr_UserId + '" data-STitle="' + full.SkillTitle + '" data-Exp="' + full.Experience + '" title="Edit" onclick="EditUser(this)" ><i class="fa fa-edit"></i></a><a class="btn btn-icn" data-target="#containerDelete" data-toggle="modal"  data-id="' + full.Usr_UserId + '" title="Delete" onclick="DeleteSkill(this)" "><i class="fa fa-trash"></i></a>';

                                        }
                                     },

                                },
                                //{
                                //    data: null, render: function (data, type, row) {

                                //        return '<a class="btn btn-icn" data-target="#containerDelete" data-toggle="modal"  data-id="' + row.Usr_UserId + '" title="Delete" onclick="DeleteSkill(this)" "><i class="fa fa-trash"></i></a>';


                                //    }

                                //},

                            ]
                        });
                    },
                    //error: function (msg) {
                    //    alert(msg.responseText);
                    //}
                });
            }
            function DeleteSkill(d) {
                var userId = d.getAttribute("data-id");

                $.ajax({

                    type: "POST",
                    data: { id: userId },
                    url: "/UserSkills/DeleteSkills",
                    dataType: "json",
                    cache: false,
                    success: function (res) {

                        alert(res);
                        loaddata();
                    },

                    //error: function (Result) {

                    //    //alert("Error");

                    //}

                })

            }

            function EditUser(d) {

                var SkillID = d.getAttribute("data-skillID");
                usrid = d.getAttribute("data-id");
                var title = d.getAttribute("data-STitle");
                $("#SkillsTitle").val(SkillID);
                //$("#SkillsTitle").val(title);
                var Experience = d.getAttribute("data-Exp");
                var seperateExperience = (Experience).split(".");
                alert(seperateExperience);
                var getFirstVal = seperateExperience[0];
                var getSecondVal = seperateExperience[1];
                $("#YearsOfExperienceEdit").val(getFirstVal);
                $("#MonthsOfExperienceEdit").val(getSecondVal);
            }
            function clickget() {
                document.getElementById("#taskcontainer").show;
            }


        </script>

        <script>



        </script>



        <script type="text/javascript">
            $(document).ready(function () {
                bindSkills();
                $("#timesheet_management").addClass("active");
                $("#timesheet_management > ul.treeview-menu > li:last-child").addClass("click");
                $("#timesheet_management").siblings().removeClass("active");
            });






        </script>
        <style>
                    .evInputBtn {
                        display: inline-block;
                        padding: 5px 10px;
                        margin: 3px 5px;
                        background: #FF3300;
                        color: #FFF !important;
                        font-size: 14px;
                        font-weight: bold;
                        text-decoration: none;
                        text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
                        border: none;
                        -webkit-border-radius: 5px;
                        -moz-border-radius: 5px;
                        border-radius: 5px;
                        box-shadow: inset 0px -10px 15px rgba(0, 0, 0, 0.2), 1px 1px 5px rgba(0,0,0,0.2);
                        -webkit-box-shadow: inset 0px -10px 15px rgba(0, 0, 0, 0.2), 1px 1px 5px rgba(0,0,0,0.2);
                        -moz-box-shadow: inset 0px -10px 15px rgba(0, 0, 0, 0.2), 1px 1px 5px rgba(0,0,0,0.2);
                        cursor: pointer;
                    }

                        .evInputBtn:hover {
                            background: #FF6600;
                        }

                    /*input, select, textarea {
                        max-width: 1000px;
                    }*/

                    .contentArea {
                        background: #FFF url(../images/shadow.png) repeat-x;
                        box-shadow: 0px 5px 8px rgba(183, 35, 35, 0.81);
                        padding: 30px;
                        min-height: 350px;
                    }

                    #MainTable {
                        border: 0px !important;
                    }

                    #SubTable {
                        border: 0px !important;
                    }

                    #SubTable2 {
                        border: 0px !important;
                    }

                    #tabCon {
                        background-color: rgba(158, 158, 158, 0.18);
                    }

            /* tr {
                        background: transparent;
                    }

             th {
                        background: #141414;
                        font-size: 15px;
                    }

                    td {
                        font-family: 'Open Sans', sans-serif;
                        font-size: 13px;
                        color: #000;
                        border: 0;
                        padding: 5px;
                    }
                */
                    table#ClientDetails td {
                        border-bottom-color: gray;
                    }

            /* table {
                        border: 1px solid grey;
                    }

                    th {
                        border-left: 0px solid #EAEAEA;
                        border-bottom: 0px solid #EAEAEA;
                        padding: 5px;
                    }

                    tr:nth-of-type(odd) {
                background: #eee;
            }*/

                    .evAdminTable th {
                        border-bottom: 0px solid #EAEAEA;
                        padding: 5px;
                        background: #666;
                        color: #FFF;
                    }
        </style>
        <script type="text/javascript">
            $(document).ready(function () {
                $("#Skills_management").addClass("active");
                $("#Skills_management > ul.treeview-menu > li:last-child").addClass("click");
                $("#Skills_management").siblings().removeClass("active");
            });
        </script>
